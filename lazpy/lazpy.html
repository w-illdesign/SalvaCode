<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>ExÃ©cuteur Python â€” Minimal & Responsive (Skulpt)</title>

<!-- Fira Code (mono) depuis Google Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;600&display=swap" rel="stylesheet">

<!-- Prism CSS Dracula depuis CDN -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.30.0/themes/prism-dracula.min.css">

<!-- CodeMirror CSS de base depuis CDN -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.14/codemirror.min.css">

<!-- ThÃ¨me Dracula CodeMirror depuis CDN -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.14/theme/dracula.min.css">

<!-- Styles personnalisÃ©s -->

<link rel="stylesheet" href="../css/style-index.css">
<link rel="stylesheet" href="c.css">

<style>
  #download { position: fixed; right: 16px; bottom: 16px; z-index: 2000; }
  textarea#codeInput { 
    width: 100%; 
    height: 100%; 
    box-sizing: border-box; 
    padding:12px; 
    font-family: 'Fira Code', monospace; 
    font-size:13px; 
  }
</style>

<!-- Prism JS depuis CDN -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.30.0/prism.min.js" defer></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.30.0/components/prism-python.min.js" defer></script>

<!-- CodeMirror JS depuis CDN -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.14/codemirror.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.14/mode/python/python.min.js"></script>

<!-- Skulpt depuis CDN -->
<script src="https://cdn.jsdelivr.net/npm/skulpt@1.2.0/dist/skulpt.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/skulpt@1.2.0/dist/skulpt-stdlib.js"></script>
</head>

<body>
    
 <!-- Styles -->
<style>
  header {
    left: 0;
    right: 0;
    position: fixed;
    
    box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    transition: transform 200ms ease, opacity 180ms ease;
  }

  /* Main header (SalvaCode) */
  #mainHeader.hidden {
    transform: translateY(-100%);
    opacity: 0;
    pointer-events: none;
    
  }

  /* Secondary header (boutons) reste toujours visible */
  #secondaryHeader {
    top: 0; /* ou juste sous mainHeader si tu veux */
    position: fixed;
    left: 0;
    right: 0;
    z-index: 1;
    
    display: flex;
    justify-content: space-between;
    padding: 8px 16px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.08);
  }

  .btn {
    border: none;
    cursor: pointer;
    padding: 6px 10px;
    border-radius: 6px;
  }

  .btn.small { padding: 6px 8px; font-size: 13px; z-index: 1000090;}
  .btn.ghost { background: transparent; border: 1px solid rgba(0,0,0,0.1); }
  .btn.primary { background: #0b84ff; color: white; display: flex; align-items: center; gap: 6px; }

  main { transition: padding-top 160ms ease; padding-top: 16px; }
  
  
  
</style>

<!-- Main Header (SalvaCode) -->
<header id="mainHeader">
  

    <div class="wrap" style="display:flex;align-items:center;justify-content:space-between;gap:16px;">
      <!-- LOGO -->
      <div class="logo" style="display:flex;align-items:center;gap:6px;">
        <svg width="22" height="22" viewBox="0 0 24 24" fill="none"
             xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
          <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="1.4"/>
        </svg>
        <strong>SalvaCode</strong>
      </div>

      <!-- NAVIGATION -->
      <nav class="simple-nav" aria-label="Navigation principale">
  <!-- Accueil -->
  <a href="../index.html" class="simple-link" aria-label="Accueil - page d'accueil">
    <span class="icon-box" role="img" aria-hidden="false" title="Accueil">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640" aria-hidden="true"
     style="width:24px;height:24px;transition:color .3s ease;color:var(--ring);display:inline-block;cursor:pointer;">
  <style>
    svg:hover { color:var(--muted); }
    path { fill:currentColor; }
  </style>
  <path d="M341.8 72.6C329.5 61.2 310.5 61.2 298.3 72.6L74.3 280.6C64.7 289.6 61.5 303.5 66.3 315.7C71.1 327.9 82.8 336 96 336L112 336L112 512C112 547.3 140.7 576 176 576L464 576C499.3 576 528 547.3 528 512L528 336L544 336C557.2 336 569 327.9 573.8 315.7C578.6 303.5 575.4 289.5 565.8 280.6L341.8 72.6zM304 384L336 384C362.5 384 384 405.5 384 432L384 528L256 528L256 432C256 405.5 277.5 384 304 384z"/>
</svg>
    </span>
    <span class="label">Accueil</span>
  </a>

  <!-- Cours -->
  <a href="../cours.html" class="simple-link" aria-label="Cours">
    <span class="icon-box" role="img" title="Cours">
        
        
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640" aria-hidden="true"
     style="width:24px;height:24px;transition:color .3s ease;color: var(--ring);display:inline-block;cursor:pointer;">
  <style>
    svg:hover { color:var(--muted); } 
    path { fill:currentColor; }
  </style>
  <path d="M392.8 65.2C375.8 60.3 358.1 70.2 353.2 87.2L225.2 535.2C220.3 552.2 230.2 569.9 247.2 574.8C264.2 579.7 281.9 569.8 286.8 552.8L414.8 104.8C419.7 87.8 409.8 70.1 392.8 65.2zM457.4 201.3C444.9 213.8 444.9 234.1 457.4 246.6L530.8 320L457.4 393.4C444.9 405.9 444.9 426.2 457.4 438.7C469.9 451.2 490.2 451.2 502.7 438.7L598.7 342.7C611.2 330.2 611.2 309.9 598.7 297.4L502.7 201.4C490.2 188.9 469.9 188.9 457.4 201.4zM182.7 201.3C170.2 188.8 149.9 188.8 137.4 201.3L41.4 297.3C28.9 309.8 28.9 330.1 41.4 342.6L137.4 438.6C149.9 451.1 170.2 451.1 182.7 438.6C195.2 426.1 195.2 405.8 182.7 393.3L109.3 320L182.6 246.6C195.1 234.1 195.1 213.8 182.6 201.3z"/>
</svg>
    </span>
    <span class="label">Apprendre</span>
  </a>

  <!-- Challenge (coupe simple) -->
  
 <a href="../challenge.html" class="simple-link" aria-label="Challenge">
  <span class="icon-box" role="img" title="Challenge">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640" aria-hidden="true"
     style="width:24px;height:24px;transition:color .3s ease;color:var(--ring);display:inline-block;cursor:pointer;">
  <style>
    svg:hover { color:var(--muted); }
    path { fill:currentColor; }
  </style>
  <path d="M208.3 64L432.3 64C458.8 64 480.4 85.8 479.4 112.2C479.2 117.5 479 122.8 478.7 128L528.3 128C554.4 128 577.4 149.6 575.4 177.8C567.9 281.5 514.9 338.5 457.4 368.3C441.6 376.5 425.5 382.6 410.2 387.1C390 415.7 369 430.8 352.3 438.9L352.3 512L416.3 512C434 512 448.3 526.3 448.3 544C448.3 561.7 434 576 416.3 576L224.3 576C206.6 576 192.3 561.7 192.3 544C192.3 526.3 206.6 512 224.3 512L288.3 512L288.3 438.9C272.3 431.2 252.4 416.9 233 390.6C214.6 385.8 194.6 378.5 175.1 367.5C121 337.2 72.2 280.1 65.2 177.6C63.3 149.5 86.2 127.9 112.3 127.9L161.9 127.9C161.6 122.7 161.4 117.5 161.2 112.1C160.2 85.6 181.8 63.9 208.3 63.9zM165.5 176L113.1 176C119.3 260.7 158.2 303.1 198.3 325.6C183.9 288.3 172 239.6 165.5 176zM444 320.8C484.5 297 521.1 254.7 527.3 176L475 176C468.8 236.9 457.6 284.2 444 320.8z"/>
</svg>
    <span class="challenge-dot" hidden></span>
  </span>
  <span class="label">Challenge</span>
</a>
  
</nav>


      <!-- BADGE EXAM -->
      <div style="display:flex;gap:8px;align-items:center; color: var(--accent);">
        <div class="exam-badge" role="status" aria-label="Examens">
      
          <button id="showHeaderBtn" class="btn small ghost" title="Afficher / Masquer le header">Masquer l'entÃªte</button>
          
        </div>
      </div>
    </div>
  </header>

<!-- Secondary header (toujours visible) -->
<header id="secondaryHeader">
  <div style="display:flex; gap:8px; align-items:center; z-index: 100099;">
    <button id="openHistSidebarBtn" class="btn small ghost" aria-controls="historySidebar" title="Historique">â˜°</button>
    <button id="showHeaderBtn2" class="btn small ghost" title="Afficher / Masquer le header">Afficher l'entÃªte</button>
  </div>
  </div>
  <div style="margin-left:auto;">
    <!-- Bouton Run -->
<button id="runBtn" class="btn primary" aria-label="ExÃ©cuter" style="position: relative; display: flex; align-items: center; gap: 4px;">
  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
    <path d="M4 3.993v8.014a.5.5 0 0 0 .757.429l6.857-4.007a.5.5 0 0 0 0-.858L4.757 3.564A.5.5 0 0 0 4 3.993z"/>
  </svg>
  <kbd class="run-tooltip">Ctrl/Cmd + Enter</kbd>
</button>

<style>
  /* Cacher le tooltip par dÃ©faut */
  .run-tooltip {
    display: none;
    position: absolute;
    top: -28px;
    left: 50%;
    transform: translateX(-50%);
    background: rgba(0,0,0,0.8);
    color: #fff;
    padding: 2px 6px;
    border-radius: 4px;
    font-size: 12px;
    pointer-events: none;
    white-space: nowrap;
  }

  /* Afficher uniquement au survol */
  #runBtn:hover .run-tooltip {
    display: block;
  }
</style>
  </div>
</header>





<!-- Boutons flottants en haut Ã  droite -->

<main style="display: flex; flex-direction: column; height: 100vh;" id="mainContent">
  
  

  <!-- Conteneur flex pour CodeMirror -->
  <div class="editor" style="flex: 1; display: flex; flex-direction: column; border: 1px solid #444; border-radius: 6px; ">
      
  <textarea id="codeInput" spellcheck="false">
# Bienvenue dans Python ðŸŽ‰
print("Hello, world!")
  </textarea>
  
</div>

</main>

<!-- Preview avec Prism -->
<div class="code-wrapper">
  <pre><code id="preview" class="language-python"></code></pre>
</div>

<!-- Sidebar history -->
<div id="historyOverlay" class="history-overlay" style="display:none;"></div>
<div id="historySidebar" class="history-sidebar" aria-hidden="true">
  <div class="history-header">
    <span>Historique</span>
    <div class="history-controls">
      <button id="clearHistBtnSidebar" class="btn small ghost">Effacer</button>
      <button id="closeHistBtnSidebar" class="btn small ghost" aria-label="Fermer">Ã—</button>
    </div>
  </div>
  <div id="historyList" class="history-list"></div>
</div>
<div id="historySidebarBackdrop" class="history-backdrop" tabindex="-1" style="display:none"></div>

<!-- Terminal modal -->
<div id="terminalModal" class="modal" role="dialog" aria-modal="true" aria-label="Terminal Skulpt">
  <div class="modal-content">
    <button class="close" aria-label="Fermer">&times;</button>
    <div class="status" style="margin-bottom:8px; display:flex; gap:8px; align-items:center;">
      <div id="modalSpinner" style="display:none;" aria-hidden="true">
        <span class="spinner" role="status" aria-hidden="true"></span>
      </div>
      <div id="modalStatus" class="small">PrÃªt</div>
    </div>
    <div id="modalTerminal" class="terminal" role="log" aria-live="polite" aria-atomic="false">
      <div style="color:var(--muted)">Appuie sur ExÃ©cuter pour lancer le code. Les sorties apparaÃ®tront ici.</div>
    </div>
    <div style="display:flex; gap:8px; justify-content:flex-start; align-items:center; margin-top:10px;">
      <button id="toggleHistBtn" class="btn small">Mon historique</button>
      <button id="clearHistBtn" class="btn small ghost">Effacer</button>
    </div>
    <div id="modalHistory" class="history" style="margin-top:8px; max-height:200px; overflow:auto; display:none"></div>
    <div class="small" style="color:var(--muted); margin-top:10px;">
      ExÃ©cution Python via Skulpt (interprÃ©teur Python en JS). input() interactif supportÃ©.
    </div>
  </div>
</div>



<script>
  const mainHeader = document.getElementById('mainHeader');
const showBtns = [
  document.getElementById('showHeaderBtn'),   // bouton existant
  document.getElementById('showHeaderBtn2')   // nouveau bouton ajoutÃ©
];
const mainContent = document.getElementById('mainContent');
const secondaryHeader = document.getElementById('secondaryHeader');

// Ajuste padding-top pour que rien ne soit cachÃ©
function updatePadding() {
  const headerHeight = mainHeader.classList.contains('hidden') ? 0 : mainHeader.offsetHeight;

  // Si le header est visible â†’ petite marge (par ex. 4px)
  // Si cachÃ© â†’ marge par dÃ©faut (16px)
  const extraMargin = mainHeader.classList.contains('hidden') ? 4 : -54;

  mainContent.style.paddingTop = (extraMargin + headerHeight + document.getElementById('secondaryHeader').offsetHeight) + 'px';
}
// dÃ¨s le premier touch / clic
function hideMainHeader(e) {
  // si l'Ã©vÃ©nement vient de l'un des boutons, ignorer
  if (showBtns.some(btn => e.target.closest(`#${btn.id}`))) return;
  mainHeader.classList.add('hidden');
  showBtns.forEach(btn => btn.setAttribute('aria-expanded', 'true'));
  updatePadding();
}

window.addEventListener('touchstart', hideMainHeader, { once: true, passive:true });
window.addEventListener('mousedown', hideMainHeader, { once: true });

// Fonction pour basculer le header
function toggleHeader() {
  mainHeader.classList.toggle('hidden');
  const expanded = !mainHeader.classList.contains('hidden');
  showBtns.forEach(btn => btn.setAttribute('aria-expanded', expanded ? 'false' : 'true'));
  updatePadding();
}

// Attacher toggleHeader aux deux boutons
showBtns.forEach(btn => btn.addEventListener('click', toggleHeader));

// RÃ©ajustement lors du resize
window.addEventListener('resize', updatePadding);

// Initial padding
updatePadding();
</script>

<!-- Bouton Copier -->
<div style="position: fixed; right: 26px; bottom: 30px; z-index:2000; display:flex; gap:8px;">
  <button class="btn small" id="copyBtn">Copier</button>
</div>

<script>
const textarea = document.getElementById('codeInput');

document.getElementById('copyBtn').addEventListener('click', async function(e) {
  e.preventDefault();
  const code = textarea.value;
  try {
    await navigator.clipboard.writeText(code);
    const btn = document.getElementById('copyBtn');
    const originalText = btn.textContent;
    btn.textContent = 'CopiÃ© !';
    setTimeout(() => btn.textContent = originalText, 1500);
  } catch (err) {
    console.error('Erreur lors de la copie :', err);
  }
});
</script>


<!-- Script personnalisÃ© -->
<script src="c.js"></script>


</body>
</html>