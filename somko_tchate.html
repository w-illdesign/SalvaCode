<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Somko tchat</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <header>
    <h1>Somko tchat</h1>
    <!-- bouton global options dans l'entête -->
    <div style="display:flex; gap:8px; align-items:center; padding-right:8px;">
      <button id="openOptionsBtn" class="control-btn" title="Ouvrir les options">Menu</button>
    </div>
  </header>

  <main>
    
      <div class="chat-card">
  <!-- bloc avatar + pseudo + ID -->
  <div class="me-info">
    <div style="display:flex; gap:8px; align-items:center;">
      
      <div style="display:flex; flex-direction:column;">
        <div id="mePseudo" style="font-weight:700"></div>
        <div style="font-size:12px; color:var(--muted)">
          Ton ID (navigateur):
          <span id="meId" style="font-family:monospace; font-size:12px;"></span>
        </div>
      </div>
    </div>
    <div id="adminHint" class="note" style="display:none;color:#ff1f00;">
      Mode modérateur activé.
    </div>
  </div>

  <!-- zone messages -->
  <div id="messages" class="messages" aria-live="polite" ></div>

  <!-- footer avec input + bouton -->
  <div class="footer">
    <div class="input-area">
      <textarea id="inputMessage" class="message-input" placeholder="Écris ton message..."></textarea>
      <button id="sendBtn"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 48 48" fill="none">
  <path d="M24 6L24 42" stroke="currentColor" stroke-width="10" stroke-linecap="round"/>
  <path d="M12 18L24 6L36 18" stroke="currentColor" stroke-width="10" stroke-linecap="round" stroke-linejoin="round"/>
</svg></button>
    </div>
  </div>
  
</div>
    
  </main>

  <!-- MODAL: petite fenêtre d'options -->
  <div id="optionsModal" class="modal" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="modal-overlay" data-close="true"></div>
    <div class="modal-content" role="document" aria-labelledby="modalTitle">
      <div class="modal-header">
        <div id="modalTitle" class="modal-title">Options</div>
        <button id="closeModalBtn" class="control-btn" aria-label="Fermer">Fermer</button>
      </div>
      <div class="modal-body">
        <div class="note">Les pseudos et couleurs sont stockés dans ton navigateur. Aucun compte nécessaire. (Prototype)</div>

        <div style="display:flex; gap:10px; align-items:center; justify-content:space-between;">
          <div style="display:flex; gap:8px; align-items:center;">
            <div id="modalAvatar" class="avatar"></div>
            <div style="display:flex; flex-direction:column;">
              <div id="modalPseudo" style="font-weight:700; color:var(--ink)"></div>
              <div style="font-size:12px; color:var(--muted)">Ton ID (navigateur): <span id="modalId" style="font-family:monospace; font-size:12px;"></span></div>
            </div>
          </div>
          <div style="display:flex; gap:8px;">
            <button id="modalChangeBtn" class="control-btn">Changer pseudo</button>
            <button id="modalAdminBtn" class="control-btn">Activer modérateur</button>
          </div>
        </div>
        
        

        <div style="margin-top:6px;">
          <div style="font-size:13px; color:var(--muted); margin-bottom:6px;">Aperçu :</div>
          <div class="preview-row">
            <div id="previewAvatar" class="avatar"></div>
            <div style="display:flex; flex-direction:column;">
              <div id="previewLine" style="color:var(--ink); font-weight:700;"></div>
              <div id="previewTime" style="font-size:12px; color:var(--muted);"></div>
            </div>
          </div>
        </div>
<label for="fontSizeRange">Taille du texte <span id="fontSizeValue">15px</span></label>
<input type="range" id="fontSizeRange" min="10" max="25" value="15">

      </div>
      
    </div>
  </div>
  
  <script>
      const fontSizeRange = document.getElementById("fontSizeRange");
const fontSizeValue = document.getElementById("fontSizeValue");

// Charger valeur sauvegardée
let savedFontSize = localStorage.getItem("msgFontSize");
if (savedFontSize) {
  document.documentElement.style.setProperty("--msg-font-size", savedFontSize + "px");
  if (fontSizeRange) fontSizeRange.value = savedFontSize;
  if (fontSizeValue) fontSizeValue.textContent = savedFontSize + "px";
}

if (fontSizeRange) {
  fontSizeRange.addEventListener("input", () => {
    const size = fontSizeRange.value;
    document.documentElement.style.setProperty("--msg-font-size", size + "px");
    localStorage.setItem("msgFontSize", size);
    if (fontSizeValue) fontSizeValue.textContent = size + "px";
  });
}
  </script>
  <script type="module" src="js/app.js"></script>
</body>
</html>