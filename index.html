<!DOCTYPE html><html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Je suis Will</title>
  <style>
      
  </style>
  <link rel="stylesheet" href="css/style-index.css">
</head>
<body>
  <header>
    <div class="wrap">
      <div style="display:flex;flex-direction:column;"></div>
      <div style="display:flex;gap:8px;align-items:center">
        <div class="exam-badge" role="status" aria-label="Examens">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" style="opacity:.9" xmlns="http://www.w3.org/2000/svg"><path d="M12 2L20 7V17C20 18.1 19.1 19 18 19H6C4.9 19 4 18.1 4 17V7L12 2Z" stroke="currentColor" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"></path></svg>
          <span>Na</span>
          <strong>Somko</strong>
        </div><!-- Bouton pour ouvrir l'écran de changement (trois petits points) -->
    <button class="change-toggle" id="open-change" aria-label="Ouvrir écran de changement"> 
      <span aria-hidden="true">●</span>
      <span aria-hidden="true">●</span>
      <span aria-hidden="true">●</span>
    </button>
  </div>
</div>

  </header>  <!-- HERO -->  <div class="hero-wrap">
    <section class="hero" aria-label="Section hero">
      <div class="overlay" aria-hidden="true">
        <div class="caption">Devenez programmeur web python avec Django et Flask</div>
      </div>
      <div class="img-wrap" role="img" aria-label="Hero image">
        <div class="img-inner">
          <!-- lazy ajouté : data-src au lieu de src, loading lazy pour navigateur -->
          <img data-src="hero.webp" alt="Hero — WillPython" loading="lazy" class="lazy-loading">
        </div>
      </div>
    </section>
    
  </div>  <!-- ECRAN DE CHANGEMENT : petits points animés + citations -->  <div class="change-screen" id="change-screen" role="dialog" aria-modal="true" aria-hidden="true" aria-label="Écran de changement - citations de codage">
    <div class="change-card" role="document">
      <button class="change-close" id="close-change" aria-label="Fermer écran">✕</button>
      <div class="title">Pause — citations et inspiration</div>
      <div class="quote-wrap">
        <div class="quote" id="quote-text">Chargement...</div>
      </div>
      <div class="quote-meta" id="quote-author"></div>
      <div class="controls" aria-hidden="false">
        <button id="prev-quote">◀</button>
        <button id="toggle-rotation" class="primary">Pause</button>
        <button id="next-quote">▶</button>
      </div>
    </div>
  </div>  <section class="students" aria-label="Mes étudiants">
    <h2 style="margin-bottom:12px; margin-right: 30px; margin-left: 30px;">Participants</h2>
    <div class="student-grid" id="student-grid" aria-live="polite"></div>
  </section>  <!-- Plan du cours : placé directement sous le hero pour le rendre visible -->  <main>
      <section class="module-section">
  <div class="module-header">
    <span class="step">Avant tout </span>
    <h3 class="title">Installation des outils</h3>
  </div>
  <div class="module-list">
    <p><strong>Beaucoup de gens pensent que coder est difficile.</strong> Mais en réalité, avec les bons outils et un peu de pratique, chacun peut progresser rapidement. Cette étape va vous préparer pour réussir les modules suivants :</p>
    <ul>
      <li><strong>Python :</strong> le langage que vous utiliserez pour tous les exercices.</li>
      <li><strong>Éditeur de code :</strong> (VS Code, PyCharm, ou autre) pour écrire et tester vos programmes facilement.</li>
      <li><strong>Test de configuration :</strong> vérifier que tout fonctionne correctement avant de commencer.</li>
    </ul>
    <p>Une fois ces outils installés, vous serez prêt à coder et à suivre les prochains modules avec confiance et motivation.</p>
    <ul>
      <li>Ressources : <a href="lien_ressource.html">Lien vers la page HTML</a></li>
      <li>Exercices : <a href="lien_exercice.html">Lien vers la page HTML</a></li>
    </ul>
  </div>
</section>
    <div class="grid" id="grid"></div>
  </main>  <script>
    /* -------------------- Chargement des modules depuis steps.json -------------------- */
    const grid = document.getElementById('grid');

    function makeCard(step){
      const card = document.createElement('article');
      card.className = 'card';
      const meta = document.createElement('div');
      meta.className = 'meta';
      const stepBadge = document.createElement('div');
      stepBadge.className = 'step';
      stepBadge.textContent = 'Étape ' + (step.number ?? '');
      const titleMeta = document.createElement('div');
      titleMeta.className = 'title';
      titleMeta.textContent = step.title ?? '';
      meta.appendChild(stepBadge);
      meta.appendChild(titleMeta);

      const sample = document.createElement('div');
      sample.className = 'sample';
      sample.textContent = step.sample || step.title || '';

      const moduleList = document.createElement('div');
      moduleList.className = 'module-list';
      const intro = document.createElement('div');
      intro.textContent = "Contenu du module :";
      const ul = document.createElement('ul');
      (step.items || []).forEach(it => {
        const li = document.createElement('li');
        li.textContent = it;
        ul.appendChild(li);
      });
      moduleList.appendChild(intro);
      moduleList.appendChild(ul);

      const links = document.createElement('div');
      links.className = 'links';
      const resHref = step.links && step.links.resources ? step.links.resources : '#';
      const exHref = step.links && step.links.exercises ? step.links.exercises : '#';
      links.innerHTML = ` <a class="btn" href="${resHref}" target="_blank" rel="noopener">Ressources</a>
                         <a class="btn primary" href="${exHref}" target="_blank" rel="noopener">Exercices</a>`;

      card.appendChild(meta);
      card.appendChild(sample);
      card.appendChild(moduleList);
      card.appendChild(links);
      return card;
    }

    async function loadStepsFromJSON(){
      let data = null;
      try {
        const res = await fetch('steps.json', { cache: "no-store" });
        if(!res.ok) throw new Error('HTTP ' + res.status);
        data = await res.json();
      } catch(err) {
        console.warn('Impossible de charger steps.json — fallback minimal.', err);
        data = [
          { number: 0, title: "Installation des outils", sample: "Installation des outils", items: ["Installation de Python","Installation d’un éditeur de code (VS Code, PyCharm, ou autre)","Test de la configuration"], links: { resources: "installation-outils.html", exercises: "exercices-installation.html" } }
        ];
      }

      grid.innerHTML = '';
      data.forEach(s => grid.appendChild(makeCard(s)));
    }

    document.addEventListener('DOMContentLoaded', () => {
      loadStepsFromJSON();
    });

    /* -------------------- Chargement participants (fallback) -------------------- */
    (async function loadParticipants(){
      const fallback = [
        {"profil":"https://i.pravatar.cc/150?img=1","nom":"*KASONGO* Serge","note":18},
        {"profil":"https://i.pravatar.cc/150?img=5","nom":"*KABONGO* Marie","note":16},
        {"profil":"https://i.pravatar.cc/150?img=3","nom":"*MWAWOKA* Dieudonné","note":15},
        {"profil":"https://i.pravatar.cc/150?img=2","nom":"*LUBANGI* Alice","note":12},
        {"profil":"https://i.pravatar.cc/150?img=4","nom":"*NKULU* Jean","note":10}
      ];

      let data = null;
      try {
        const res = await fetch('participants.json', {cache: "no-store"});
        if(!res.ok) throw new Error('HTTP ' + res.status);
        data = await res.json();
      } catch (err) {
        console.warn('Impossible de charger participants.json — fallback utilisé.', err);
        data = fallback;
      }

      data.sort((a,b) => (b.note||0) - (a.note||0));

      const studentGrid = document.getElementById('student-grid');
      studentGrid.innerHTML = '';

      data.forEach((s, idx) => {
        const div = document.createElement('div');
        div.className = 'student-card' + (idx===0? ' rank-1' : idx===1? ' rank-2' : idx===2? ' rank-3' : '');

        const noteHtml = `
          <div class="note" aria-hidden="false">

  <!-- Pastille de position -->
  <div class="position-bubble" aria-hidden="true" title="Position">
    <span class="pos-number">${idx+1}</span>
  </div>

  <!-- Score + étoile dans une section alignée -->
  <div class="score-section">
    <span class="score">${s.note ?? ''}</span>
    <svg class="note-star" viewBox="0 0 24 24" aria-hidden="true" focusable="false" role="img" xmlns="http://www.w3.org/2000/svg">
      <path d="M12 .587l3.668 7.431L23.5 9.748l-5.75 5.6L19.335 24 12 20.01 4.665 24l1.585-8.652L.5 9.748l7.832-1.73L12 .587z" fill="#FFD700"/>
    </svg>
  </div>

</div>
        `;

        div.innerHTML = `
          ${noteHtml}
          <div class="name">${s.nom ?? '—'}</div>
          <img data-src="${s.profil ?? ''}" alt="${s.nom ?? 'Profil'}" loading="lazy" class="lazy-loading">
        `;

        studentGrid.appendChild(div);
      });

      observeLazyImages();
    })();

   /* -------------------- Lazy loader (inchangé) -------------------- */
    function observeLazyImages(){
      const imgs = document.querySelectorAll('img[data-src]');
      if('IntersectionObserver' in window){
        const obs = new IntersectionObserver((entries, o) => {
          entries.forEach(e => {
            if(e.isIntersecting){
              const img = e.target;
              img.src = img.dataset.src;
              img.addEventListener('load', function onLoad(){
                img.classList.remove('lazy-loading');
                img.classList.add('loaded');
                img.removeEventListener('load', onLoad);
              });
              img.removeAttribute('data-src');
              o.unobserve(img);
            }
          });
        }, {rootMargin: "200px 0px"});
        imgs.forEach(img => obs.observe(img));
      } else {
        imgs.forEach(img => {
          img.src = img.dataset.src;
          img.addEventListener('load', function onLoad(){
            img.classList.remove('lazy-loading');
            img.classList.add('loaded');
            img.removeEventListener('load', onLoad);
          });
          img.removeAttribute('data-src');
        });
      }
    }

    document.addEventListener('DOMContentLoaded', () => {
      observeLazyImages();
    });

    /* -------------------- ÉCRAN DE CHANGEMENT : citations -------------------- */
    (function changeScreenModule(){
      const quotes = [
        {t: "Écris du code que les humains comprennent.", a: "— Robert C. Martin"},
        {t: "Les bons programmeurs commentent, les grands réécrivent.", a: "— Inconnu"},
        {t: "Debugging is like being the detective in a crime movie where you are also the murderer.", a: "— Filipe Fortes"},
        {t: "Premature optimization is the root of all evil.", a: "— Donald Knuth"},
        {t: "Répète jusqu'à ce que ça marche, puis nettoie jusqu'à ce que ce soit beau.", a: "— Will"}
      ];

      let idx = 0; let rotating = true; let rotTimer = null;
      const screen = document.getElementById('change-screen');
      const openBtn = document.getElementById('open-change');
      const closeBtn = document.getElementById('close-change');
      const qText = document.getElementById('quote-text');
      const qAuthor = document.getElementById('quote-author');
      const prevBtn = document.getElementById('prev-quote');
      const nextBtn = document.getElementById('next-quote');
      const toggleBtn = document.getElementById('toggle-rotation');

      function renderQuote(i){
        qText.classList.remove('visible');
        setTimeout(()=>{
          qText.textContent = quotes[i].t;
          qAuthor.textContent = quotes[i].a;
          qText.classList.add('visible');
        }, 120);
      }

      function startRotation(){
        rotTimer = setInterval(()=>{ idx = (idx+1) % quotes.length; renderQuote(idx); }, 4500);
        toggleBtn.textContent = 'Pause'; rotating = true;
      }
      function stopRotation(){ clearInterval(rotTimer); rotTimer = null; toggleBtn.textContent = 'Lecture'; rotating = false; }

      openBtn.addEventListener('click', ()=>{ showChangeScreen(); });
      closeBtn.addEventListener('click', ()=>{ hideChangeScreen(); });
      prevBtn.addEventListener('click', ()=>{ idx = (idx - 1 + quotes.length) % quotes.length; renderQuote(idx); });
      nextBtn.addEventListener('click', ()=>{ idx = (idx + 1) % quotes.length; renderQuote(idx); });
      toggleBtn.addEventListener('click', ()=>{ rotating ? stopRotation() : startRotation(); });

      function showChangeScreen(){
        screen.style.display = 'flex';
        screen.setAttribute('aria-hidden','false');
        renderQuote(idx);
        if(rotTimer) clearInterval(rotTimer);
        startRotation();
        // focus accessible
        closeBtn.focus();
      }
      function hideChangeScreen(){
        screen.style.display = 'none';
        screen.setAttribute('aria-hidden','true');
        stopRotation();
      }

      // fermer si on clique en dehors de la carte
      screen.addEventListener('click', (ev) => {
        if(ev.target === screen) hideChangeScreen();
      });
      // fermer à echap
      document.addEventListener('keydown', (ev) => { if(ev.key === 'Escape') hideChangeScreen(); });

      // expose functions si besoin (ex: tests ou ouverture depuis autre module)
      window.showChangeScreen = showChangeScreen;
      window.hideChangeScreen = hideChangeScreen;

    })();

  </script>
</body>
</html>
