<!DOCTYPE html><html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Je suis Will</title>
  <style>
    :root{
      --bg:#0f0f12; --panel:#15161a; --ink:#e9e9ef; --muted:#a4a6b0;
      --accent:#e63946; --chip:#1e2026; --card:#131417; --ring:#2a2d36;
    }
    html,body{
      height:100%;
      margin:0;
      font-family:system-ui,-apple-system, "Segoe UI", Roboto, Ubuntu, Cantarell, "Noto Sans", sans-serif;
      background:linear-gradient(180deg,#0f0f12 0%, #121318 60%, #0e0f13 100%);
      color:var(--ink);
    }
    header{
      position:sticky;
      top:0;
      z-index:10;
      backdrop-filter:saturate(1.2) blur(8px);
      background:linear-gradient(180deg,#121317bb,#12131799 60%, transparent);
      border-bottom:1px solid var(--ring);
    }
    .wrap{ max-width:1200px;margin:0 auto;padding:16px;display:flex;gap:12px;align-items:center;justify-content:space-between }
    h1{margin:0;font-size:clamp(18px,2.6vw,26px)}
    .exam-badge{background:var(--chip);border:1px solid var(--ring);padding:8px 12px;border-radius:999px;color:var(--muted);font-weight:700;display:inline-flex;align-items:center;gap:8px}
    .exam-badge strong{color:var(--accent);font-weight:900}/* bouton pour ouvrir l'écran de changement */
.change-toggle{
  appearance:none;border:0;background:transparent;color:var(--muted);font-weight:800;padding:8px 10px;border-radius:10px;cursor:pointer;
  display:inline-flex;gap:6px;align-items:center;justify-content:center;border:1px solid transparent;transition:transform .15s ease, background .15s ease;
}
.change-toggle:focus{outline:2px solid var(--ring)}
.change-toggle:hover{transform:translateY(-2px);color:var(--ink)}

/* --- ECRAN DE CHANGEMENT (overlay fullscreen) --- */
.change-screen{
  position:fixed;inset:0;z-index:9999;display:none;align-items:center;justify-content:center;
  background:rgba(3,4,6,0.72);backdrop-filter: blur(8px) saturate(120%);
}
/* fond de petits points animé : pattern en repeating-radial-gradient */
.change-screen::before{
  content:"";position:absolute;inset:0;pointer-events:none;
  background-image: repeating-radial-gradient(circle, rgba(255,255,255,0.055) 0 1px, transparent 1px 8px);
  background-size: 16px 16px;opacity:0.95;mix-blend-mode:overlay;filter: blur(0.8px) saturate(1.05);
  animation: moveDots 18s linear infinite;
}
@keyframes moveDots{ from{background-position:0 0} to{background-position:500px 500px} }

/* carte centrale pour citations */
.change-card{
  position:relative;z-index:2;min-width:min(860px,92%);max-width:1100px;border-radius:16px;padding:28px 28px 22px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
  border:1px solid rgba(255,255,255,0.04);box-shadow:0 20px 60px rgba(0,0,0,0.6);display:flex;flex-direction:column;align-items:center;gap:18px;
}
.change-card .title{font-size:18px;font-weight:900;color:var(--accent);letter-spacing:0.6px}
.quote-wrap{width:100%;display:flex;align-items:center;justify-content:center;gap:12px;padding:12px}
.quote{
  font-family:'Patrick Hand', cursive;font-size:24px;line-height:1.2;text-align:center;color:var(--ink);max-width:88%;opacity:0;transform:translateY(6px);transition:opacity .45s ease, transform .45s ease;
}
.quote.visible{opacity:1;transform:translateY(0)}

.quote-meta{font-size:13px;color:var(--muted);font-weight:700}

/* contrôles bas: précédent / pause / suivant / fermer */
.controls{display:flex;gap:8px;align-items:center}
.controls button{appearance:none;border:0;background:#111215;padding:8px 12px;border-radius:10px;color:var(--muted);cursor:pointer;border:1px solid var(--ring);font-weight:800}
.controls button.primary{background:var(--accent);color:#fff}

/* bouton de fermeture (coin) */
.change-close{position:absolute;right:14px;top:14px;z-index:3;background:transparent;border:0;color:var(--muted);font-weight:900;cursor:pointer;padding:6px 8px}

/* responsive */
@media (max-width:780px){
  .change-card{padding:18px;min-width:92%}
  .quote{font-size:18px}
}

/* reste du code CSS utilisateur (compressé) */
/* Hero, cards, students etc. (conservé intact) */
.hero-wrap{max-width:1200px;margin:18px auto;padding:0 16px; display:flex; flex-direction:column; align-items:center;}
.hero{background:linear-gradient(180deg, rgba(255,255,255,0.02), transparent);border:1px solid var(--ring);border-radius:14px;padding:14px;display:flex;flex-direction:column;align-items:center;gap:12px;position:relative;overflow:hidden}
.img-wrap{position:relative;padding:8px;display:block;width:300px;height:auto;margin-top:auto;box-sizing:border-box}
.img-wrap::before{content:"";position:absolute;inset:0;border-radius:12px;background: conic-gradient(from 0deg,#ff0066,#ff9900,#ffd500,#33ff77,#00d4ff,#7a6cff,#ff0066);filter: blur(14px) saturate(120%);opacity:0.95;transform: translateZ(0);animation: spin-border 8s linear infinite, glow 3s ease-in-out infinite alternate;pointer-events:none;z-index:0}
.img-inner{position:relative;z-index:1;overflow:hidden}
.img-inner img{display:block;width:100%;height:auto;border-radius:10px;vertical-align:middle}
.lazy-loading{filter: blur(8px) saturate(.9);transform: scale(1.01);transition: filter .45s ease, transform .45s ease, opacity .45s ease;opacity:0.95;background: linear-gradient(90deg, rgba(255,255,255,0.01), rgba(255,255,255,0.02));}
img:not([data-src]).lazy-placeholder,img.loaded {filter: none;transform: none;opacity:1}
.img-preview-placeholder{width:84px;height:84px;border-radius:10px;background:linear-gradient(90deg, rgba(255,255,255,0.02), rgba(255,255,255,0.03));border:1px solid var(--ring)}
.overlay {position: absolute;inset: 0;z-index: 2;display: flex;align-items: flex-end;justify-content: center;pointer-events: none;padding-bottom: 0px}
.overlay .caption {background: rgba(2,6,11,0.45);padding: 14px 20px;border-radius: 12px;font-size: 15px;font-family:'Patrick Hand', cursive;font-weight: 700;text-align: center;color: var(--ink);backdrop-filter: blur(100px) saturate(120%);box-shadow: 0 8px 30px rgba(0,0,0,0.6);max-width: 92%;line-height: 1.15}
@keyframes spin-border{ from{ transform: rotate(0deg) } to{ transform: rotate(360deg) } }
@keyframes glow{ 0%{filter: blur(6px) saturate(120%) brightness(1);} 50%{filter: blur(16px) saturate(160%) brightness(1.3);} 100%{filter: blur(6px) saturate(120%) brightness(1);} }
@keyframes light-effect{ 0%{filter: brightness(1);} 50%{filter: brightness(1.25);} 100%{filter: brightness(1);} }
main{padding:18px 16px;max-width:1200px;margin:0 auto}
.grid{display:grid;gap:14px;grid-template-columns: repeat(auto-fill, minmax(320px, 1fr))}
.card{background:var(--card);border:1px solid var(--ring);border-radius:14px;overflow:hidden;display:flex;flex-direction:column;min-height:160px}
.meta{display:flex;align-items:center;justify-content:space-between;padding:12px;border-bottom:1px solid var(--ring)}
.meta .step{font-weight:800;font-size:13px;background:#2a2d36;padding:6px 10px;border-radius:999px;color:var(--muted)}
.meta .title{font-weight:700;font-size:15px}
.sample{padding:16px 16px 6px;flex:0 0 auto;display:flex;align-items:center;justify-content:center;text-align:center;line-height:1.2;word-break:break-word;font-family:'Patrick Hand', cursive; font-size:18px; color:var(--ink)}
.module-list{padding:6px 18px 18px;color:var(--muted); font-size:14px}
.module-list ul{margin:8px 0 0 18px}
.module-list li{margin:6px 0}
.links{display:flex;gap:8px;padding:10px 12px;border-top:1px solid var(--ring)}
.btn{flex:1;text-align:center;padding:8px 10px;border-radius:10px;font-size:13px;text-decoration:none;cursor:pointer;border:1px solid var(--ring);background:#1b1d23;color:var(--ink)}
.btn.primary{background:var(--accent);border-color:transparent}

.students{margin:30px 40px}
.student-grid{display:flex;flex-direction:column;gap:12px}
.student-card{background:var(--card);border:1px solid var(--ring);border-radius:12px;padding:10px 12px;display:flex;align-items:center;gap:12px;text-align:left;justify-content:space-between;min-height:64px;box-shadow: 0 6px 20px rgba(0,0,0,0.45)}
.student-card .note{

display:flex;align-items:center;gap:8px;width:110px;text-align:left;font-weight:700;color:var(--muted);font-size:14px;flex:0 0 110px;} .student-card .note svg{width:18px;height:18px;flex:0 0 18px;fill:var(--muted);opacity:0.95} .student-card .note .score{font-weight:800;color:var(--muted);font-size:14px, }

/* petite pastille de position */ .position-bubble{width:36px;height:36px;border-radius:50%;display:inline-flex;align-items:center;justify-content:center;font-weight:900;font-size:13px;border:2px solid rgba(255,255,255,0.06);background:rgba(255,255,255,0.03);color:#ffffff;flex:0 0 36px} .position-bubble .pos-number{line-height:1;display:inline-block} .note-star{width:18px;height:18px;flex:0 0 18px;display:inline-block;margin-left:4px}

/* overrides de couleur selon le rang (mêmes couleurs que la bordure du profil) */ .student-card.rank-1 .position-bubble{background:#00ab10;border-color:#00ab10;color:#ffffff} .student-card.rank-2 .position-bubble{background:#ff7a00;border-color:#ff7a00;color:#ffffff} .student-card.rank-3 .position-bubble{background:#cc0000;border-color:#cc0000;color:#ffffff}

.student-card.rank-1 img { border-color: #00ab10; box-shadow: 0 6px 18px rgba(255,204,51,0.14); } .student-card.rank-2 img { border-color: #ff7a00; box-shadow: 0 6px 18px rgba(255,122,0,0.14); } .student-card.rank-3 img { border-color: #cc0000; box-shadow: 0 6px 18px rgba(204,0,0,0.14); }

/* s'assurer que texte reste lisible */ .student-card.rank-1 .name, .student-card.rank-2 .name, .student-card.rank-3 .name { color:var(--ink); } .student-card .name{flex:1 1 auto;text-align:center;font-weight:800;font-size:15px;color:var(--ink);overflow:hidden;text-overflow:ellipsis;white-space:nowrap;padding:0 8px} .student-card img{width:72px;height:72px;border-radius:50%;object-fit:cover;box-shadow:0 4px 12px rgba(0,0,0,0.5);flex:0 0 72px;border:1px solid rgba(255,255,255,0.04);transition:filter .25s ease, transform .2s ease;filter: saturate(0.95) contrast(0.94)} .student-card img.lazy-loading{ filter: blur(6px) grayscale(.15); transform: scale(.995) } .student-card.rank-1 img { border-color: #00ab10; box-shadow: 0 6px 18px rgba(255,204,51,0.14); } .student-card.rank-2 img { border-color: #ff7a00; box-shadow: 0 6px 18px rgba(255,122,0,0.14); } .student-card.rank-3 img { border-color: #cc0000; box-shadow: 0 6px 18px rgba(204,0,0,0.14); } .student-card.rank-1 .name,.student-card.rank-2 .name,.student-card.rank-3 .name { color:var(--ink); } @media (max-width:780px){ .wrap{flex-direction:column;align-items:flex-start} .grid{grid-template-columns:1fr} .students{margin:20px 18px;} } @media (max-width:480px){ .student-card{ padding:8px; min-height:62px; gap:8px; } .student-card img{ width:56px; height:56px; flex:0 0 56px; } .student-card .note{ flex:0 0 64px; width:64px; font-size:13px;} .student-card .name{ font-size:14px; } }

.note {
  display: flex;
  align-items: center;
  gap: 1x; /* espace entre la pastille et le score-section */
  color: #FFD700;
}


/* Section contenant score + étoile */
.score-section {
margin-left: 15px;
  display: flex;
  align-items: center;
  gap: 4px; /* espace entre score et étoile */
  color: #FFD700; /* même couleur que le SVG */
  font-weight: 700;
  font-size: 14px;
}

/* Optionnel : taille de l'étoile */
.note-star {
  width: 18px;
  height: 18px;
  flex-shrink: 0;
}

.module-section {
  background: var(--card);
  border: 1px solid var(--ring);
  border-radius: 12px;
  padding: 16px 18px;
  margin-bottom: 18px;
  margin-top: 18px;
}

.module-header {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 12px;
}

.module-header .step {
  font-weight: 800;
  font-size: 13px;
  background: #2a2d36;
  padding: 6px 10px;
  border-radius: 999px;
  color: var(--muted);
}

.module-header .title {
  font-weight: 700;
  font-size: 15px;
  color: var(--ink);
}

.module-list ul {
  margin: 8px 0 0 18px;
}

.module-list li {
  margin: 6px 0;
  font-size: 14px;
  color: var(--muted);
} 
</style>

  <link href="https://fonts.googleapis.com/css2?family=Patrick+Hand&display=swap" rel="stylesheet">
</head>
<body>
  <header>
    <div class="wrap">
      <div style="display:flex;flex-direction:column;"></div>
      <div style="display:flex;gap:8px;align-items:center">
        <div class="exam-badge" role="status" aria-label="Examens">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" style="opacity:.9" xmlns="http://www.w3.org/2000/svg"><path d="M12 2L20 7V17C20 18.1 19.1 19 18 19H6C4.9 19 4 18.1 4 17V7L12 2Z" stroke="currentColor" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"></path></svg>
          <span>Na</span>
          <strong>Somko</strong>
        </div><!-- Bouton pour ouvrir l'écran de changement (trois petits points) -->
    <button class="change-toggle" id="open-change" aria-label="Ouvrir écran de changement"> 
      <span aria-hidden="true">●</span>
      <span aria-hidden="true">●</span>
      <span aria-hidden="true">●</span>
    </button>
  </div>
</div>

  </header>  <!-- HERO -->  <div class="hero-wrap">
    <section class="hero" aria-label="Section hero">
      <div class="overlay" aria-hidden="true">
        <div class="caption">Devenez programmeur web python avec Django et Flask</div>
      </div>
      <div class="img-wrap" role="img" aria-label="Hero image">
        <div class="img-inner">
          <!-- lazy ajouté : data-src au lieu de src, loading lazy pour navigateur -->
          <img data-src="hero.webp" alt="Hero — WillPython" loading="lazy" class="lazy-loading">
        </div>
      </div>
    </section>
    
  </div>  <!-- ECRAN DE CHANGEMENT : petits points animés + citations -->  <div class="change-screen" id="change-screen" role="dialog" aria-modal="true" aria-hidden="true" aria-label="Écran de changement - citations de codage">
    <div class="change-card" role="document">
      <button class="change-close" id="close-change" aria-label="Fermer écran">✕</button>
      <div class="title">Pause — citations et inspiration</div>
      <div class="quote-wrap">
        <div class="quote" id="quote-text">Chargement...</div>
      </div>
      <div class="quote-meta" id="quote-author"></div>
      <div class="controls" aria-hidden="false">
        <button id="prev-quote">◀</button>
        <button id="toggle-rotation" class="primary">Pause</button>
        <button id="next-quote">▶</button>
      </div>
    </div>
  </div>  <section class="students" aria-label="Mes étudiants">
    <h2 style="margin-bottom:12px; margin-right: 30px; margin-left: 30px;">Participants</h2>
    <div class="student-grid" id="student-grid" aria-live="polite"></div>
  </section>  <!-- Plan du cours : placé directement sous le hero pour le rendre visible -->  <main>
      <section class="module-section">
  <div class="module-header">
    <span class="step">Avant tout </span>
    <h3 class="title">Installation des outils</h3>
  </div>
  <div class="module-list">
    <p><strong>Beaucoup de gens pensent que coder est difficile.</strong> Mais en réalité, avec les bons outils et un peu de pratique, chacun peut progresser rapidement. Cette étape va vous préparer pour réussir les modules suivants :</p>
    <ul>
      <li><strong>Python :</strong> le langage que vous utiliserez pour tous les exercices.</li>
      <li><strong>Éditeur de code :</strong> (VS Code, PyCharm, ou autre) pour écrire et tester vos programmes facilement.</li>
      <li><strong>Test de configuration :</strong> vérifier que tout fonctionne correctement avant de commencer.</li>
    </ul>
    <p>Une fois ces outils installés, vous serez prêt à coder et à suivre les prochains modules avec confiance et motivation.</p>
    <ul>
      <li>Ressources : <a href="lien_ressource.html">Lien vers la page HTML</a></li>
      <li>Exercices : <a href="lien_exercice.html">Lien vers la page HTML</a></li>
    </ul>
  </div>
</section>
    <div class="grid" id="grid"></div>
  </main>  <script>
    /* -------------------- Chargement des modules depuis steps.json -------------------- */
    const grid = document.getElementById('grid');

    function makeCard(step){
      const card = document.createElement('article');
      card.className = 'card';
      const meta = document.createElement('div');
      meta.className = 'meta';
      const stepBadge = document.createElement('div');
      stepBadge.className = 'step';
      stepBadge.textContent = 'Étape ' + (step.number ?? '');
      const titleMeta = document.createElement('div');
      titleMeta.className = 'title';
      titleMeta.textContent = step.title ?? '';
      meta.appendChild(stepBadge);
      meta.appendChild(titleMeta);

      const sample = document.createElement('div');
      sample.className = 'sample';
      sample.textContent = step.sample || step.title || '';

      const moduleList = document.createElement('div');
      moduleList.className = 'module-list';
      const intro = document.createElement('div');
      intro.textContent = "Contenu du module :";
      const ul = document.createElement('ul');
      (step.items || []).forEach(it => {
        const li = document.createElement('li');
        li.textContent = it;
        ul.appendChild(li);
      });
      moduleList.appendChild(intro);
      moduleList.appendChild(ul);

      const links = document.createElement('div');
      links.className = 'links';
      const resHref = step.links && step.links.resources ? step.links.resources : '#';
      const exHref = step.links && step.links.exercises ? step.links.exercises : '#';
      links.innerHTML = ` <a class="btn" href="${resHref}" target="_blank" rel="noopener">Ressources</a>
                         <a class="btn primary" href="${exHref}" target="_blank" rel="noopener">Exercices</a>`;

      card.appendChild(meta);
      card.appendChild(sample);
      card.appendChild(moduleList);
      card.appendChild(links);
      return card;
    }

    async function loadStepsFromJSON(){
      let data = null;
      try {
        const res = await fetch('steps.json', { cache: "no-store" });
        if(!res.ok) throw new Error('HTTP ' + res.status);
        data = await res.json();
      } catch(err) {
        console.warn('Impossible de charger steps.json — fallback minimal.', err);
        data = [
          { number: 0, title: "Installation des outils", sample: "Installation des outils", items: ["Installation de Python","Installation d’un éditeur de code (VS Code, PyCharm, ou autre)","Test de la configuration"], links: { resources: "installation-outils.html", exercises: "exercices-installation.html" } }
        ];
      }

      grid.innerHTML = '';
      data.forEach(s => grid.appendChild(makeCard(s)));
    }

    document.addEventListener('DOMContentLoaded', () => {
      loadStepsFromJSON();
    });

    /* -------------------- Chargement participants (fallback) -------------------- */
    (async function loadParticipants(){
      const fallback = [
        {"profil":"https://i.pravatar.cc/150?img=1","nom":"*KASONGO* Serge","note":18},
        {"profil":"https://i.pravatar.cc/150?img=5","nom":"*KABONGO* Marie","note":16},
        {"profil":"https://i.pravatar.cc/150?img=3","nom":"*MWAWOKA* Dieudonné","note":15},
        {"profil":"https://i.pravatar.cc/150?img=2","nom":"*LUBANGI* Alice","note":12},
        {"profil":"https://i.pravatar.cc/150?img=4","nom":"*NKULU* Jean","note":10}
      ];

      let data = null;
      try {
        const res = await fetch('participants.json', {cache: "no-store"});
        if(!res.ok) throw new Error('HTTP ' + res.status);
        data = await res.json();
      } catch (err) {
        console.warn('Impossible de charger participants.json — fallback utilisé.', err);
        data = fallback;
      }

      data.sort((a,b) => (b.note||0) - (a.note||0));

      const studentGrid = document.getElementById('student-grid');
      studentGrid.innerHTML = '';

      data.forEach((s, idx) => {
        const div = document.createElement('div');
        div.className = 'student-card' + (idx===0? ' rank-1' : idx===1? ' rank-2' : idx===2? ' rank-3' : '');

        const noteHtml = `
          <div class="note" aria-hidden="false">

  <!-- Pastille de position -->
  <div class="position-bubble" aria-hidden="true" title="Position">
    <span class="pos-number">${idx+1}</span>
  </div>

  <!-- Score + étoile dans une section alignée -->
  <div class="score-section">
    <span class="score">${s.note ?? ''}</span>
    <svg class="note-star" viewBox="0 0 24 24" aria-hidden="true" focusable="false" role="img" xmlns="http://www.w3.org/2000/svg">
      <path d="M12 .587l3.668 7.431L23.5 9.748l-5.75 5.6L19.335 24 12 20.01 4.665 24l1.585-8.652L.5 9.748l7.832-1.73L12 .587z" fill="#FFD700"/>
    </svg>
  </div>

</div>
        `;

        div.innerHTML = `
          ${noteHtml}
          <div class="name">${s.nom ?? '—'}</div>
          <img data-src="${s.profil ?? ''}" alt="${s.nom ?? 'Profil'}" loading="lazy" class="lazy-loading">
        `;

        studentGrid.appendChild(div);
      });

      observeLazyImages();
    })();

   /* -------------------- Lazy loader (inchangé) -------------------- */
    function observeLazyImages(){
      const imgs = document.querySelectorAll('img[data-src]');
      if('IntersectionObserver' in window){
        const obs = new IntersectionObserver((entries, o) => {
          entries.forEach(e => {
            if(e.isIntersecting){
              const img = e.target;
              img.src = img.dataset.src;
              img.addEventListener('load', function onLoad(){
                img.classList.remove('lazy-loading');
                img.classList.add('loaded');
                img.removeEventListener('load', onLoad);
              });
              img.removeAttribute('data-src');
              o.unobserve(img);
            }
          });
        }, {rootMargin: "200px 0px"});
        imgs.forEach(img => obs.observe(img));
      } else {
        imgs.forEach(img => {
          img.src = img.dataset.src;
          img.addEventListener('load', function onLoad(){
            img.classList.remove('lazy-loading');
            img.classList.add('loaded');
            img.removeEventListener('load', onLoad);
          });
          img.removeAttribute('data-src');
        });
      }
    }

    document.addEventListener('DOMContentLoaded', () => {
      observeLazyImages();
    });

    /* -------------------- ÉCRAN DE CHANGEMENT : citations -------------------- */
    (function changeScreenModule(){
      const quotes = [
        {t: "Écris du code que les humains comprennent.", a: "— Robert C. Martin"},
        {t: "Les bons programmeurs commentent, les grands réécrivent.", a: "— Inconnu"},
        {t: "Debugging is like being the detective in a crime movie where you are also the murderer.", a: "— Filipe Fortes"},
        {t: "Premature optimization is the root of all evil.", a: "— Donald Knuth"},
        {t: "Répète jusqu'à ce que ça marche, puis nettoie jusqu'à ce que ce soit beau.", a: "— Will"}
      ];

      let idx = 0; let rotating = true; let rotTimer = null;
      const screen = document.getElementById('change-screen');
      const openBtn = document.getElementById('open-change');
      const closeBtn = document.getElementById('close-change');
      const qText = document.getElementById('quote-text');
      const qAuthor = document.getElementById('quote-author');
      const prevBtn = document.getElementById('prev-quote');
      const nextBtn = document.getElementById('next-quote');
      const toggleBtn = document.getElementById('toggle-rotation');

      function renderQuote(i){
        qText.classList.remove('visible');
        setTimeout(()=>{
          qText.textContent = quotes[i].t;
          qAuthor.textContent = quotes[i].a;
          qText.classList.add('visible');
        }, 120);
      }

      function startRotation(){
        rotTimer = setInterval(()=>{ idx = (idx+1) % quotes.length; renderQuote(idx); }, 4500);
        toggleBtn.textContent = 'Pause'; rotating = true;
      }
      function stopRotation(){ clearInterval(rotTimer); rotTimer = null; toggleBtn.textContent = 'Lecture'; rotating = false; }

      openBtn.addEventListener('click', ()=>{ showChangeScreen(); });
      closeBtn.addEventListener('click', ()=>{ hideChangeScreen(); });
      prevBtn.addEventListener('click', ()=>{ idx = (idx - 1 + quotes.length) % quotes.length; renderQuote(idx); });
      nextBtn.addEventListener('click', ()=>{ idx = (idx + 1) % quotes.length; renderQuote(idx); });
      toggleBtn.addEventListener('click', ()=>{ rotating ? stopRotation() : startRotation(); });

      function showChangeScreen(){
        screen.style.display = 'flex';
        screen.setAttribute('aria-hidden','false');
        renderQuote(idx);
        if(rotTimer) clearInterval(rotTimer);
        startRotation();
        // focus accessible
        closeBtn.focus();
      }
      function hideChangeScreen(){
        screen.style.display = 'none';
        screen.setAttribute('aria-hidden','true');
        stopRotation();
      }

      // fermer si on clique en dehors de la carte
      screen.addEventListener('click', (ev) => {
        if(ev.target === screen) hideChangeScreen();
      });
      // fermer à echap
      document.addEventListener('keydown', (ev) => { if(ev.key === 'Escape') hideChangeScreen(); });

      // expose functions si besoin (ex: tests ou ouverture depuis autre module)
      window.showChangeScreen = showChangeScreen;
      window.hideChangeScreen = hideChangeScreen;

    })();

  </script>
</body>
</html>
